<!doctype html>
<html class="no-js" lang="">

<head>
  <meta charset="utf-8">
  <title></title>

  <link rel="stylesheet" href="css/markdowneditor.css">
</head>

<body>
<div id="toolbar"></div>
<div id="editor" contenteditable="true">
  <!--<pre contenteditable="true"></pre>-->
</div>
<!--<textarea id="editor"></textarea>-->
<div id="preview"></div>
<script>
  function render(){
    let html = '';
    const editor = document.getElementById('editor');
    const preview = document.getElementById('preview');
    const markdownArr = editor.innerText.split('\n');
    for(let i=0; i<=markdownArr.length; i++){
      html = html + header(markdownArr[i]);
    }

    preview.innerHTML = html;
    console.log(markdownArr);
  }
  document.addEventListener('keydown', (e) => {
    e = e || window.event;
    if(e.key = '13'){
     render();
    }
  });
  function header(mdtext) {
    let htmltext;
    const pattern = /^(#){1,6}\s/g;
    if(pattern.test(mdtext)){
      const content = mdtext.replace(pattern, '');
      const hlevel = pattern.exec(mdtext)[0].length;
      htmltext = '<h' + hlevel + '>' + content + '</h' + hlevel + '>';
    }else{
      htmltext = '';
    }
    return htmltext;
  }



  // /^(#){1,6}\s/g
  // '# animal\n## dog\n### little dog\n#### little little dog\n## cat\n### little cat\n## mouse\n### little mouse'
  // document.getElementById('preview').innerHTML = html;
</script>
</body>

</html>
